<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Set the Neovim | 哈牛魔</title><meta name=keywords content="NeoVim,IDE,code"><meta name=description content="Firstly Begin by installing neovim.
sudo pacman -S neovim
Use the .lua to conigure NeoVim

can use the .vim to configure NeoVim too.

Set the config path of nvim
In the linux system, the nvim config directory local in the ~/.config/nvim. This PATH also called runtime path , NeoVim read the ~/.config/nvim/init.lua by default.
In theory, all the config things can be placed in this .lua, but not a good idea."><meta name=author content="WZERO"><link rel=canonical href=https://vkwzero.github.io/posts/%E9%85%8D%E7%BD%AEneovim/><link crossorigin=anonymous href=/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn+yY=" rel="preload stylesheet" as=style><link rel=icon href=https://vkwzero.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://vkwzero.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://vkwzero.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://vkwzero.github.io/apple-touch-icon.png><link rel=mask-icon href=https://vkwzero.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://vkwzero.github.io/posts/%E9%85%8D%E7%BD%AEneovim/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://vkwzero.github.io/posts/%E9%85%8D%E7%BD%AEneovim/"><meta property="og:site_name" content="哈牛魔"><meta property="og:title" content="Set the Neovim"><meta property="og:description" content="Firstly Begin by installing neovim.
sudo pacman -S neovim Use the .lua to conigure NeoVim
can use the .vim to configure NeoVim too.
Set the config path of nvim In the linux system, the nvim config directory local in the ~/.config/nvim. This PATH also called runtime path , NeoVim read the ~/.config/nvim/init.lua by default.
In theory, all the config things can be placed in this .lua, but not a good idea."><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-15T12:30:00+08:00"><meta property="article:modified_time" content="2025-10-15T12:30:00+08:00"><meta property="article:tag" content="NeoVim"><meta property="article:tag" content="IDE"><meta property="article:tag" content="Code"><meta name=twitter:card content="summary"><meta name=twitter:title content="Set the Neovim"><meta name=twitter:description content="Firstly Begin by installing neovim.
sudo pacman -S neovim
Use the .lua to conigure NeoVim

can use the .vim to configure NeoVim too.

Set the config path of nvim
In the linux system, the nvim config directory local in the ~/.config/nvim. This PATH also called runtime path , NeoVim read the ~/.config/nvim/init.lua by default.
In theory, all the config things can be placed in this .lua, but not a good idea."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://vkwzero.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Set the Neovim","item":"https://vkwzero.github.io/posts/%E9%85%8D%E7%BD%AEneovim/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Set the Neovim","name":"Set the Neovim","description":"Firstly Begin by installing neovim.\nsudo pacman -S neovim Use the .lua to conigure NeoVim\ncan use the .vim to configure NeoVim too.\nSet the config path of nvim In the linux system, the nvim config directory local in the ~/.config/nvim. This PATH also called runtime path , NeoVim read the ~/.config/nvim/init.lua by default.\nIn theory, all the config things can be placed in this .lua, but not a good idea.\n","keywords":["NeoVim","IDE","code"],"articleBody":"Firstly Begin by installing neovim.\nsudo pacman -S neovim Use the .lua to conigure NeoVim\ncan use the .vim to configure NeoVim too.\nSet the config path of nvim In the linux system, the nvim config directory local in the ~/.config/nvim. This PATH also called runtime path , NeoVim read the ~/.config/nvim/init.lua by default.\nIn theory, all the config things can be placed in this .lua, but not a good idea.\nSo, separating the directory structure is essential.\n. ├── init.lua ├── lazy-lock.json ├── lsp │ └── ty.lua └── lua ├── colorscheme.lua ├── keymaps.lua ├── lsp.lua ├── options.lua └── plugins.lua Explanation:\ninit.lua is the ==Entry point== of configuring nvim, it lead us to other .lua. coloscheme.lua configure the themes. keymaps.lua configure the Key mapping (按键映射). lsp.lua configure the [[LSP]] to realize automatic code completion (代码自动补全). options.lua configure the options plugins.lua configure the plugins. lazy-lock.json using the lazy.nvim will generate a Lock File. ==Don’t edit it directly.== (lock file can exactly lock the Neovim’s plugins’ version, which ensure your config can work in any devices any time.) lsp directory, each file corresponds to an [[LSP]]. In this example, only set a python lsp called ty lua directory, when we load a require module (file), will automaticlly search in it. Replace the PATH delimiter (路径分隔符) from / to ., then delete the .lua, the result is the require ’s parameter format (参数格式). Such as reuire(options), require(colorscheme). Set the Lua config file Simple command introduction Just discuss the cmd in nvim.\nvim.g.foo = bar This is a sentence about confiuring NeoVim by .lua\nMeans: “Set a Global Variable (全局变量) named foo and set its value to the currrent value (当前值) of the variable bar”. 设置一个名为 foo 的全局变量，并将其值设定为变量 bar 的当前值。\nvim.g vim is a “[[根对象|root objet]] ”(根对象) provided by NeoVim in the lua environment, which is used to access all NeoVim APIs and variables. (A root object is a concept which describe as a initial point or the top aspect in coding. Just like the root of a tree. Every leave and stem “grows” from the root.) .g refers to the Global scope (全局作用域). Compeletely equal the traditional Vimscript(g: in the .vimrc ) foo (the name of variable) This is the name of the Global Variable. The Global Variable means it available anywhere in NeoVim. All your .lua config All your plugins In the Command Line (命令行) of NeoVim (for example, you can view its value though echo g:foo) bar (the value you assigned to the variable) This is the crucial part of this code sentence. Cause the bar doesn’t with the \"\", so it’s not a string(字符串). bar must have been defined as a variable. (most likely is a lua Local Variable (局部变量)) vim.g,foo = bar will read the bar variable, and copy it to the vim.g.foo. --a simple example --define a lua local variable 'bar' local bar = \"hachimi\" -- now, excute the code vim.g.foo = bar -- just equal vim.g.foo = \"hachimi\" If you use vig.g.foo = \"bar\" That mean the value of vim.g.foo is \"bar\". Cause \"bar\" is a string instead of variable.\nA example:\n---Begin by using lua logic justify system --save the result in a local variable local python_path if vim.fn.has(\"win32\") then python_path = \"C:/Python314/python.exe\" else python_path = \"/usr/bin/python3\" end --assign the value of the lua variable to a Global Variable --Suppose a plugin needs to read the Global Variable g:my_python_path vim.g.my_python_path = python_path --when the plugin want to know the sysytem u r running, it can read the Global Varible vim.g.my_python_path vim.opt.foo = bar That means: Set a built-in (内置的) option of NeoVim named foo and set its value to the current value of the lua variable bar\nvim.opt (option scope 选项作用域) vim is the root object opt is the abbreviation of options. It is specifically designed for accessing and setting the built- in Settings of NeoVim. Equal the traditional VimScript(set command in .vimrc file) foo (name of the option) This is the name of the built-in NeoVim option what u wanna set. ==Not same as the foo in vim.g.foo == The foo in vim.g.foo is a variable you created at will, NeoVim doesn’t know g:foo is what (usually for plugins) The foo in vim.opt.foo must be a valid option name already defined by NeoVim. Example: number: whether to display the line number (行号) relativenumber: whether to display the relative line number (相对行号) tabstop: one tab equal how many (space). shiftwidth: the width of automatic indentation (自动缩进) expandtab: whether to tansfor tab to space. clipboard: the options of clipboard (剪贴板). bar (the value you assigned just like vim.g.foo = bar) foo is just a expamle, not a real thing. It just a placeholder (占位符).\n--the real code --1.directly assign the value to sth -- set Booleans(布尔) vim.opt.number = true --open the line number vim.opt.relativenumber = true -- open the relative line num --set Number vim.opt.shiftwidth = 4 --automatic indentation 4 space --set String vim.opt.clipboard = \"unamedplus\" -- use the sys clipboard --2.use the variable to assign local use_tabs = false if use_tabs then vim.opt.expandtab = false --don't tansform tab to space vim.opt.tabstop =4 else vim.opt.expandtab = true --transform tab to space vim.opt.tabstop = 2 vim.opt.shiftwidth = 2 end vim.cmd(some_vimscript) a``` This is a very strong \"bypass tunel\" or \"bridge\" Function. \u003e Means: \u003e In the lua environment, execute the 'traditional *Vimscript* command' represented by the string within the parentheses (括号). 1. `vim`: no need to introduce 2. `.cmd`: the abbreviation of command, which is a funtion *NeoVim* provided. 3. `(some_vimscript)`: the parameter (参数) passed to (传递) the `cmd` funtion. - `some_vimscript` is not a string in here. It is a Lua variable. - This variable `some_vimscript` must include a string that you want the *NeoVim* to execute. This is quite understandable. Core function: \"retreat\" *Lua* to *Vimscript*. The thing is designed to enable you to execute *Vim*'s native language, *Vimscript*, using *Lua*. Example: ```lua --1.begin by defining a lua string include Vimscript command --\"set number\" is a vimscript command instead of a Lua string local some_vimscript = \"set number\" --2.execute it vim.cmd(some_vimscript) --this sentence equal u write `setnumber` in .vimrc vim.opt.number = true vim.opt.relativebumber = true --equal to vim.cmd(\"set number\") vim.cmd(\"set relativenumber\") U may think that is dumb. I have had a new and better way, why still use the old?\nMigration configuration (迁移配置): When you migrate from .vimrc to init.lua, the quickest way is to add vim.cmd(). Plugin invocation (插件调用): Many (especially the old) plugins require u to use Vimscript to invoke their setting functions(调用设置函数). --some plugins may order u to set like that --call some_plugin#setup() --It is Vimscript --In Lua you must use vim.cmd() if u want use the plugin vim.cmd(\"call some_plugin#setup\") Defining commands or automatic commands (定义命令或自定义命令): Sometimes, using vim.cmd to write Vimscript’s autcmd or command (custom commands) is better than using Lua’s API. More concise and familar. -- use Vimscript gramma to create a command that can automatic run when save a .md file. vim.cmd(\"autocmd BufWritePost *.md echo 'Markdown file saved!'\") ","wordCount":"1158","inLanguage":"en","datePublished":"2025-10-15T12:30:00+08:00","dateModified":"2025-10-15T12:30:00+08:00","author":{"@type":"Person","name":"WZERO"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://vkwzero.github.io/posts/%E9%85%8D%E7%BD%AEneovim/"},"publisher":{"@type":"Organization","name":"哈牛魔","logo":{"@type":"ImageObject","url":"https://vkwzero.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://vkwzero.github.io/ accesskey=h title="哈牛魔 (Alt + H)">哈牛魔</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Set the Neovim</h1><div class=post-meta><span title='2025-10-15 12:30:00 +0800 +0800'>October 15, 2025</span>&nbsp;·&nbsp;<span>WZERO</span></div></header><div class=post-content><p><del>Firstly</del> Begin by installing neovim.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo pacman -S neovim
</span></span></code></pre></div><p>Use the <code>.lua</code> to conigure <em>NeoVim</em></p><blockquote><p>can use the <code>.vim</code> to configure <em>NeoVim</em> too.</p></blockquote><h2 id=set-the-config-path-of-nvim>Set the config path of nvim<a hidden class=anchor aria-hidden=true href=#set-the-config-path-of-nvim>#</a></h2><p>In the linux system, the <code>nvim</code> config directory local in the <code>~/.config/nvim</code>. This PATH also called <code>runtime path</code> , <em>NeoVim</em> read the <code>~/.config/nvim/init.lua</code> by default.</p><p>In theory, all the config things can be placed in this <code>.lua</code>, but not a good idea.</p><p>So, separating the directory structure is essential.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>.
</span></span><span style=display:flex><span>├── init.lua
</span></span><span style=display:flex><span>├── lazy-lock.json
</span></span><span style=display:flex><span>├── lsp
</span></span><span style=display:flex><span>│   └── ty.lua
</span></span><span style=display:flex><span>└── lua
</span></span><span style=display:flex><span>    ├── colorscheme.lua
</span></span><span style=display:flex><span>    ├── keymaps.lua
</span></span><span style=display:flex><span>    ├── lsp.lua
</span></span><span style=display:flex><span>    ├── options.lua
</span></span><span style=display:flex><span>    └── plugins.lua
</span></span></code></pre></div><p>Explanation:</p><ul><li><code>init.lua</code> is the ==Entry point== of configuring <code>nvim</code>, it lead us to other <code>.lua</code>.<ul><li><code>coloscheme.lua</code> configure the themes.</li><li><code>keymaps.lua</code> configure the Key mapping (按键映射).</li><li><code>lsp.lua</code> configure the <em>[[LSP]]</em> to realize automatic code completion (代码自动补全).</li><li><code>options.lua</code> configure the options</li><li><code>plugins.lua</code> configure the plugins.</li></ul></li><li><code>lazy-lock.json</code> using the <em>lazy.nvim</em> will generate a <em>Lock File</em>. ==Don&rsquo;t edit it directly.== (<em>lock file</em> can exactly lock the <em>Neovim</em>&rsquo;s plugins&rsquo; version, which ensure your config can work in any devices any time.)</li><li><code>lsp</code> directory, each file corresponds to an <em>[[LSP]]</em>. In this example, only set a <em>python lsp</em> called <a href=github.com/astral-sh/ty>ty</a></li><li><code>lua</code> directory, when we load a <code>require</code> module (file), will automaticlly search in it.<ul><li>Replace the PATH delimiter (路径分隔符) from <code>/</code> to <code>.</code>, then delete the <code>.lua</code>, the result is the <code>require</code> &rsquo;s parameter format (参数格式). Such as <code>reuire(options)</code>, <code>require(colorscheme)</code>.</li></ul></li></ul><h2 id=set-the-lua-config-file>Set the Lua config file<a hidden class=anchor aria-hidden=true href=#set-the-lua-config-file>#</a></h2><h3 id=simple-command-introduction>Simple command introduction<a hidden class=anchor aria-hidden=true href=#simple-command-introduction>#</a></h3><p>Just discuss the cmd in <code>nvim</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>vim.g.foo <span style=color:#f92672>=</span> bar
</span></span></code></pre></div><p>This is a sentence about confiuring <em>NeoVim</em> by <code>.lua</code></p><blockquote><p>Means:
&ldquo;Set a Global Variable (全局变量) named <code>foo</code> and set its value to the currrent value (当前值) of the variable <code>bar</code>&rdquo;.
设置一个名为 <code>foo</code> 的全局变量，并将其值设定为变量 <code>bar</code> 的当前值。</p></blockquote><ol><li><code>vim.g</code><ul><li><code>vim</code> is a “[[根对象|root objet]] ”(根对象) provided by <em>NeoVim</em> in the <code>lua</code> environment, which is used to access all <em>NeoVim</em> APIs and variables. (A root object is a concept which describe as a initial point or the top aspect in coding. Just like the root of a tree. Every leave and stem &ldquo;grows&rdquo; from the root.)</li><li><code>.g</code> refers to the Global scope (全局作用域).</li><li>Compeletely equal the traditional <em>Vimscript</em>(<code>g:</code> in the <code>.vimrc </code>)</li></ul></li><li><code>foo</code> (the name of variable)<ul><li>This is the name of the Global Variable.</li><li>The Global Variable means it available anywhere in <em>NeoVim</em>.<ul><li>All your <code>.lua</code> config</li><li>All your plugins</li><li>In the Command Line (命令行) of <em>NeoVim</em> (for example, you can view its value though <code>echo g:foo</code>)</li></ul></li></ul></li><li><code>bar</code> (the value you assigned to the variable)<ul><li>This is the crucial part of this code sentence. Cause the <code>bar</code> doesn&rsquo;t with the <code>""</code>, so it&rsquo;s not a string(字符串).</li><li><code>bar</code> must have been defined as a variable. (most likely is a <code>lua</code> Local Variable (局部变量))</li><li><code>vim.g,foo = bar</code> will read the <code>bar</code> variable, and copy it to the <code>vim.g.foo</code>.</li></ul></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>--a simple example</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--define a lua local variable &#39;bar&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>local</span> bar <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;hachimi&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- now, excute the code</span>
</span></span><span style=display:flex><span>vim.g.foo <span style=color:#f92672>=</span> bar
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- just equal vim.g.foo = &#34;hachimi&#34;</span>
</span></span></code></pre></div><blockquote><p>If you use <code>vig.g.foo = "bar"</code>
That mean the value of <code>vim.g.foo</code> is <code>"bar"</code>. Cause <code>"bar"</code> is a string instead of variable.</p></blockquote><p>A example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>---Begin by using lua logic justify system</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--save the result in a local variable</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>local</span> python_path
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> vim.fn.has(<span style=color:#e6db74>&#34;win32&#34;</span>) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  python_path <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;C:/Python314/python.exe&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>  python_path <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/usr/bin/python3&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--assign the value of the lua variable to a Global Variable</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--Suppose a plugin needs to read the Global Variable g:my_python_path</span>
</span></span><span style=display:flex><span>vim.g.my_python_path <span style=color:#f92672>=</span> python_path
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--when the plugin want to know the sysytem u r running, it can read the Global Varible vim.g.my_python_path</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>vim.opt.foo <span style=color:#f92672>=</span> bar
</span></span></code></pre></div><blockquote><p>That means:
Set a built-in (内置的) option of <em>NeoVim</em> named <code>foo</code> and set its value to the current value of the <code>lua</code> variable <code>bar</code></p></blockquote><ol><li><code>vim.opt</code> (option scope 选项作用域)<ul><li><code>vim</code> is the root object</li><li><code>opt</code> is the abbreviation of <code>options</code>. It is specifically designed for accessing and setting the built- in Settings of <em>NeoVim</em>.</li><li>Equal the traditional <em>VimScript</em>(<code>set</code> command in <code>.vimrc </code>file)</li></ul></li><li><code>foo</code> (name of the option)<ul><li>This is the name of the built-in <em>NeoVim</em> option what u wanna set. ==Not same as the <code>foo</code> in <code>vim.g.foo</code> ==<ul><li>The <code>foo</code> in <code>vim.g.foo</code> is a variable you created at will, <em>NeoVim</em> doesn&rsquo;t know <code>g:foo</code> is what (usually for plugins)</li><li>The <code>foo</code> in <code>vim.opt.foo</code> must be a valid option name already defined by <em>NeoVim</em>.</li></ul></li><li>Example:<ul><li><code>number</code>: whether to display the line number (行号)</li><li><code>relativenumber</code>: whether to display the relative line number (相对行号)</li><li><code>tabstop</code>: one tab equal how many <code></code>(space).</li><li><code>shiftwidth</code>: the width of automatic indentation (自动缩进)</li><li><code>expandtab</code>: whether to tansfor tab to space.</li><li><code>clipboard</code>: the options of clipboard (剪贴板).</li></ul></li></ul></li><li><code>bar</code> (the value you assigned just like <code>vim.g.foo = bar</code>)</li></ol><p><code>foo</code> is just a expamle, not a real thing. It just a placeholder (占位符).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>--the real code</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--1.directly assign the value to sth</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- set Booleans(布尔) </span>
</span></span><span style=display:flex><span>vim.opt.number <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>  <span style=color:#75715e>--open the line number</span>
</span></span><span style=display:flex><span>vim.opt.relativenumber <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>   <span style=color:#75715e>-- open the relative line num</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--set Number </span>
</span></span><span style=display:flex><span>vim.opt.shiftwidth <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>    <span style=color:#75715e>--automatic indentation 4 space</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--set String </span>
</span></span><span style=display:flex><span>vim.opt.clipboard <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;unamedplus&#34;</span>    <span style=color:#75715e>-- use the sys clipboard</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--2.use the variable to assign</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>local</span> use_tabs <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> use_tabs <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  vim.opt.expandtab <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>    <span style=color:#75715e>--don&#39;t tansform tab to space</span>
</span></span><span style=display:flex><span>  vim.opt.tabstop <span style=color:#f92672>=</span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>  vim.opt.expandtab <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>    <span style=color:#75715e>--transform tab to space</span>
</span></span><span style=display:flex><span>  vim.opt.tabstop <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  vim.opt.shiftwidth <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>vim.cmd(some_vimscript)
</span></span><span style=display:flex><span>a<span style=color:#960050;background-color:#1e0010>```</span>
</span></span><span style=display:flex><span>This is a very strong <span style=color:#e6db74>&#34;bypass tunel&#34;</span> <span style=color:#f92672>or</span> <span style=color:#e6db74>&#34;bridge&#34;</span> Function.
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> Means:
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> In the lua environment, execute the <span style=color:#e6db74>&#39;traditional *Vimscript* command&#39;</span> represented by the string within the parentheses (<span style=color:#960050;background-color:#1e0010>括号</span>).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1.</span> <span style=color:#960050;background-color:#1e0010>`</span>vim<span style=color:#960050;background-color:#1e0010>`</span>: no need to introduce
</span></span><span style=display:flex><span><span style=color:#ae81ff>2.</span> <span style=color:#960050;background-color:#1e0010>`</span>.cmd<span style=color:#960050;background-color:#1e0010>`</span>: the abbreviation of command, which is a funtion <span style=color:#f92672>*</span>NeoVim<span style=color:#f92672>*</span> provided.
</span></span><span style=display:flex><span><span style=color:#ae81ff>3.</span> <span style=color:#960050;background-color:#1e0010>`</span>(some_vimscript)<span style=color:#960050;background-color:#1e0010>`</span>: the parameter (<span style=color:#960050;background-color:#1e0010>参数</span>) passed to (<span style=color:#960050;background-color:#1e0010>传递</span>) the <span style=color:#960050;background-color:#1e0010>`</span>cmd<span style=color:#960050;background-color:#1e0010>`</span> funtion.
</span></span><span style=display:flex><span>	<span style=color:#f92672>-</span> <span style=color:#960050;background-color:#1e0010>`</span>some_vimscript<span style=color:#960050;background-color:#1e0010>`</span> is <span style=color:#f92672>not</span> a string <span style=color:#66d9ef>in</span> here. It is a Lua variable.
</span></span><span style=display:flex><span>	<span style=color:#f92672>-</span> This variable  <span style=color:#960050;background-color:#1e0010>`</span>some_vimscript<span style=color:#960050;background-color:#1e0010>`</span> must include a string that you want the <span style=color:#f92672>*</span>NeoVim<span style=color:#f92672>*</span> to execute.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>This is quite understandable. Core <span style=color:#66d9ef>function</span>: <span style=color:#960050;background-color:#1e0010>&#34;</span><span style=color:#a6e22e>retreat</span><span style=color:#e6db74>&#34; *Lua* to *Vimscript*.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>The thing is designed to enable you to execute *Vim*&#39;s native language, *Vimscript*, using *Lua*.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Example:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>```lua
</span></span></span><span style=display:flex><span><span style=color:#e6db74>--1.begin by defining a lua string include Vimscript command
</span></span></span><span style=display:flex><span><span style=color:#e6db74>--&#34;</span>set number<span style=color:#e6db74>&#34; is a vimscript command instead of a Lua string
</span></span></span><span style=display:flex><span><span style=color:#e6db74>local some_vimscript = &#34;</span>set number<span style=color:#e6db74>&#34;    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>--2.execute it
</span></span></span><span style=display:flex><span><span style=color:#e6db74>vim.cmd(some_vimscript)    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>--this sentence equal u write `setnumber` in .vimrc
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>vim.opt.number <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>vim.opt.relativebumber <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--equal to</span>
</span></span><span style=display:flex><span>vim.cmd(<span style=color:#e6db74>&#34;set number&#34;</span>)
</span></span><span style=display:flex><span>vim.cmd(<span style=color:#e6db74>&#34;set relativenumber&#34;</span>)
</span></span></code></pre></div><p>U may think that is dumb. I have had a new and better way, why still use the old?</p><ol><li>Migration configuration (迁移配置): When you migrate from <code>.vimrc</code> to <code>init.lua</code>, the quickest way is to add <code>vim.cmd()</code>.</li><li>Plugin invocation (插件调用): Many (especially the old) plugins require u to use <em>Vimscript</em> to invoke their setting functions(调用设置函数).</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>--some plugins may order u to set like that</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--call some_plugin#setup()   --It is Vimscript</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--In Lua you must use vim.cmd() if u want use the plugin</span>
</span></span><span style=display:flex><span>vim.cmd(<span style=color:#e6db74>&#34;call some_plugin#setup&#34;</span>)
</span></span></code></pre></div><ol start=3><li>Defining commands or automatic commands (定义命令或自定义命令): Sometimes, using <code>vim.cmd</code> to write <em>Vimscript&rsquo;s</em> <code>autcmd</code> or <code>command</code> (custom commands) is better than using <em>Lua&rsquo;s</em> API. More concise and familar.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- use Vimscript gramma to create a command that can automatic run when save a .md file.</span>
</span></span><span style=display:flex><span>vim.cmd(<span style=color:#e6db74>&#34;autocmd BufWritePost *.md echo &#39;Markdown file saved!&#39;&#34;</span>)
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://vkwzero.github.io/tags/neovim/>NeoVim</a></li><li><a href=https://vkwzero.github.io/tags/ide/>IDE</a></li><li><a href=https://vkwzero.github.io/tags/code/>Code</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://vkwzero.github.io/>哈牛魔</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>